<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê±´ê°•í•œ í•™ìŠµ AI ìŠ¤í„°ë”” í”Œë˜ë„ˆ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* ë„¤ë¹„ê²Œì´ì…˜ ë°” */
        .navbar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 80px;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 20px rgba(0,0,0,0.1);
            transform: translateY(-60px);
            transition: transform 0.3s ease;
        }

        .navbar:hover, .navbar.active {
            transform: translateY(0);
        }

        .nav-menu {
            display: flex;
            gap: 30px;
        }

        .nav-item {
            padding: 12px 24px;
            background: linear-gradient(135deg, #4ecdc4, #44a08d);
            color: white;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
        }

        .nav-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .nav-item.active {
            background: linear-gradient(135deg, #ff6b6b, #ee5a52);
        }

        /* ì»¨í…Œì´ë„ˆ */
        .container {
            margin-top: 100px;
            max-width: 1400px;
            margin-left: auto;
            margin-right: auto;
            padding: 20px;
        }

        .page {
            display: none;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            padding: 40px;
            animation: fadeIn 0.5s ease;
        }

        .page.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .page-title {
            font-size: 28px;
            color: #333;
            margin-bottom: 30px;
            text-align: center;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        /* ë©”ì¸ í˜ì´ì§€ */
        .main-dashboard {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        .profile-section {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border-radius: 20px;
            padding: 30px;
        }

        .health-status {
            background: #f8f9fa;
            border-radius: 20px;
            padding: 30px;
        }

        .grade-selector {
            margin-bottom: 20px;
        }

        .grade-buttons {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }

        .grade-btn {
            padding: 10px 20px;
            border: 2px solid white;
            background: transparent;
            color: white;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .grade-btn.active {
            background: white;
            color: #667eea;
        }

        .status-card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 15px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }

        .status-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .status-indicator {
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 14px;
        }

        .status-safe { background: #d4edda; color: #155724; }
        .status-warning { background: #fff3cd; color: #856404; }
        .status-danger { background: #f8d7da; color: #721c24; }

        .input-group {
            margin-bottom: 15px;
        }

        .input-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: white;
        }

        .health-status .input-group label {
            color: #333;
        }

        .input-group input, .input-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 14px;
            background: white;
            transition: border-color 0.3s ease;
        }

        .input-group input:focus, .input-group select:focus {
            outline: none;
            border-color: #4ecdc4;
        }

        /* AI ë¶„ì„ íŒ¨ë„ */
        .ai-analysis {
            background: linear-gradient(135deg, #ff6b6b, #ee5a52);
            color: white;
            border-radius: 20px;
            padding: 30px;
            margin-top: 20px;
        }

        .analysis-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .analysis-card {
            background: rgba(255,255,255,0.15);
            padding: 20px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
        }

        /* ì¼ì¼ ê³„íší‘œ í˜ì´ì§€ */
        .daily-planner {
            margin-bottom: 30px;
        }

        .date-selector {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 20px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .subject-input-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .subject-input-card {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }

        .subject-input-title {
            font-size: 18px;
            font-weight: bold;
            color: #333;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .time-input {
            width: 100%;
            padding: 10px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 14px;
            text-align: center;
        }

        .generate-btn {
            display: block;
            margin: 20px auto;
            padding: 15px 40px;
            background: linear-gradient(135deg, #ff6b6b, #ee5a52);
            color: white;
            border: none;
            border-radius: 25px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .generate-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        /* ìƒì„±ëœ ê³„íší‘œ */
        .generated-schedule {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border-radius: 15px;
            padding: 30px;
            margin-top: 20px;
            display: none;
        }

        .schedule-timeline {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .schedule-block {
            display: flex;
            align-items: center;
            padding: 12px 20px;
            border-radius: 10px;
            font-weight: 500;
        }

        .schedule-block.study {
            background: rgba(78, 205, 196, 0.8);
        }

        .schedule-block.break {
            background: rgba(255, 217, 61, 0.8);
            color: #333;
        }

        .schedule-block.long-break {
            background: rgba(255, 107, 107, 0.8);
        }

        .schedule-block.personal {
            background: rgba(156, 39, 176, 0.8);
        }

        .schedule-time {
            font-weight: bold;
            margin-right: 15px;
            min-width: 100px;
        }

        /* íƒ€ì´ë¨¸ í˜ì´ì§€ */
        .timer-container {
            text-align: center;
            padding: 50px;
        }

        .timer-display {
            font-size: 72px;
            font-weight: bold;
            color: #333;
            margin-bottom: 30px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .timer-controls {
            display: flex;
            gap: 20px;
            justify-content: center;
            margin-bottom: 30px;
        }

        .timer-btn {
            background: linear-gradient(135deg, #4ecdc4, #44a08d);
            border: none;
            color: white;
            padding: 15px 30px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 18px;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .timer-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .timer-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        /* ì„¤ì • í˜ì´ì§€ */
        .settings-section {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
        }

        .section-title {
            font-size: 20px;
            font-weight: bold;
            color: #333;
            margin-bottom: 20px;
            border-bottom: 3px solid #4ecdc4;
            padding-bottom: 10px;
        }

        .schedule-form {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr 1fr auto;
            gap: 15px;
            align-items: end;
            margin-bottom: 20px;
        }

        .add-btn {
            background: #4ecdc4;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .add-btn:hover {
            background: #44a08d;
            transform: translateY(-1px);
        }

        .schedule-list {
            max-height: 400px;
            overflow-y: auto;
        }

        .schedule-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            background: white;
            border-radius: 8px;
            margin-bottom: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .remove-btn {
            background: #ff6b6b;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .remove-btn:hover {
            background: #ee5a52;
            transform: translateY(-1px);
        }

        /* ë°˜ì‘í˜• */
        @media (max-width: 768px) {
            .nav-menu {
                flex-wrap: wrap;
                gap: 10px;
            }
            
            .nav-item {
                font-size: 14px;
                padding: 8px 16px;
            }
            
            .main-dashboard {
                grid-template-columns: 1fr;
            }
            
            .subject-input-grid {
                grid-template-columns: 1fr;
            }
            
            .timer-display {
                font-size: 48px;
            }

            .date-selector {
                flex-direction: column;
                gap: 10px;
            }

            .schedule-form {
                grid-template-columns: 1fr;
                gap: 10px;
            }
        }
    </style>
</head>
<body>
    <nav class="navbar" id="navbar">
        <div class="nav-menu">
            <button class="nav-item active" onclick="showPage('main')">ğŸ  ë©”ì¸</button>
            <button class="nav-item" onclick="showPage('daily-plan')">ğŸ“‹ ì¼ì¼ê³„íš</button>
            <button class="nav-item" onclick="showPage('timer')">ğŸ… íƒ€ì´ë¨¸</button>
            <button class="nav-item" onclick="showPage('settings')">âš™ï¸ ì„¤ì •</button>
        </div>
    </nav>

    <div class="container">
        <!-- ë©”ì¸ í˜ì´ì§€ -->
        <div id="main" class="page active">
            <h1 class="page-title">ğŸ  ê±´ê°•í•œ í•™ìŠµ ëŒ€ì‹œë³´ë“œ</h1>
            
            <div class="main-dashboard">
                <div class="profile-section">
                    <h2 style="margin-bottom: 20px;">ğŸ‘¤ í•™ìƒ ì •ë³´</h2>
                    
                    <div class="grade-selector">
                        <label>í•™êµê¸‰ ì„ íƒ:</label>
                        <div class="grade-buttons">
                            <button class="grade-btn active" id="middle-btn" onclick="selectGrade('middle')">ì¤‘í•™ìƒ</button>
                            <button class="grade-btn" id="high-btn" onclick="selectGrade('high')">ê³ ë“±í•™ìƒ</button>
                        </div>
                    </div>

                    <div class="input-group">
                        <label for="sleep-time">í‰ê·  ìˆ˜ë©´ì‹œê°„ (ì‹œê°„)</label>
                        <select id="sleep-time" onchange="updateHealthStatus()">
                            <option value="4">4ì‹œê°„</option>
                            <option value="4.5">4.5ì‹œê°„</option>
                            <option value="5">5ì‹œê°„</option>
                            <option value="5.5">5.5ì‹œê°„</option>
                            <option value="6">6ì‹œê°„</option>
                            <option value="6.5">6.5ì‹œê°„</option>
                            <option value="7" selected>7ì‹œê°„</option>
                            <option value="7.5">7.5ì‹œê°„</option>
                            <option value="8">8ì‹œê°„</option>
                            <option value="8.5">8.5ì‹œê°„</option>
                            <option value="9">9ì‹œê°„</option>
                            <option value="9.5">9.5ì‹œê°„</option>
                            <option value="10">10ì‹œê°„</option>
                        </select>
                    </div>

                    <div class="input-group">
                        <label for="private-education-time">ì£¼ê°„ ì‚¬êµìœ¡ ì‹œê°„ (ì‹œê°„)</label>
                        <select id="private-education-time" onchange="updateHealthStatus()">
                            <option value="0">0ì‹œê°„</option>
                            <option value="5">5ì‹œê°„</option>
                            <option value="10">10ì‹œê°„</option>
                            <option value="15" selected>15ì‹œê°„</option>
                            <option value="20">20ì‹œê°„</option>
                            <option value="25">25ì‹œê°„</option>
                            <option value="30">30ì‹œê°„</option>
                            <option value="35">35ì‹œê°„</option>
                            <option value="40">40ì‹œê°„</option>
                            <option value="45">45ì‹œê°„</option>
                            <option value="50">50ì‹œê°„</option>
                        </select>
                    </div>

                    <div class="input-group">
                        <label for="school-study-time">êµë‚´ ììœ¨í•™ìŠµ ì‹œê°„ (ì‹œê°„/ì£¼)</label>
                        <select id="school-study-time" onchange="updateHealthStatus()">
                            <option value="0">0ì‹œê°„</option>
                            <option value="5">5ì‹œê°„</option>
                            <option value="10" selected>10ì‹œê°„</option>
                            <option value="15">15ì‹œê°„</option>
                            <option value="20">20ì‹œê°„</option>
                            <option value="25">25ì‹œê°„</option>
                            <option value="30">30ì‹œê°„</option>
                        </select>
                    </div>
                </div>

                <div class="health-status">
                    <h2 style="margin-bottom: 20px; color: #333;">ğŸ¥ ê±´ê°• ìƒíƒœ ë¶„ì„</h2>
                    
                    <div class="status-card" id="sleep-status">
                        <div class="status-header">
                            <span><strong>ğŸ˜´ ìˆ˜ë©´ ìƒíƒœ</strong></span>
                            <span class="status-indicator status-safe" id="sleep-indicator">ì–‘í˜¸</span>
                        </div>
                        <p id="sleep-advice">ì¶©ë¶„í•œ ìˆ˜ë©´ì„ ì·¨í•˜ê³  ìˆìŠµë‹ˆë‹¤.</p>
                    </div>

                    <div class="status-card" id="study-load-status">
                        <div class="status-header">
                            <span><strong>ğŸ“š í•™ìŠµ ë¶€ë‹´</strong></span>
                            <span class="status-indicator status-safe" id="study-indicator">ì ì •</span>
                        </div>
                        <p id="study-advice">ê±´ê°•í•œ í•™ìŠµ ì‹œê°„ì„ ìœ ì§€í•˜ê³  ìˆìŠµë‹ˆë‹¤.</p>
                    </div>

                    <div class="status-card" id="balance-status">
                        <div class="status-header">
                            <span><strong>âš–ï¸ ìƒí™œ ê· í˜•</strong></span>
                            <span class="status-indicator status-safe" id="balance-indicator">ê· í˜•</span>
                        </div>
                        <p id="balance-advice">í•™ìŠµê³¼ íœ´ì‹ì˜ ê· í˜•ì´ ì˜ ì¡í˜€ìˆìŠµë‹ˆë‹¤.</p>
                    </div>
                </div>
            </div>

            <div class="ai-analysis">
                <h2 style="text-align: center; margin-bottom: 20px;">ğŸ¤– AI ì¢…í•© ë¶„ì„ ë° ë§ì¶¤ ì¡°ì–¸</h2>
                <div class="analysis-grid">
                    <div class="analysis-card">
                        <h3 style="margin-bottom: 15px;">ğŸ“Š í˜„ì¬ ìƒíƒœ ìš”ì•½</h3>
                        <p id="current-status">í•™ìŠµ íŒ¨í„´ì„ ë¶„ì„ ì¤‘ì…ë‹ˆë‹¤...</p>
                    </div>
                    
                    <div class="analysis-card">
                        <h3 style="margin-bottom: 15px;">âš ï¸ ìœ„í—˜ ìš”ì†Œ</h3>
                        <p id="risk-factors">ìœ„í—˜ ìš”ì†Œë¥¼ ë¶„ì„ ì¤‘ì…ë‹ˆë‹¤...</p>
                    </div>
                    
                    <div class="analysis-card">
                        <h3 style="margin-bottom: 15px;">ğŸ’¡ ê°œì„  ì œì•ˆ</h3>
                        <p id="improvement-suggestions">ë§ì¶¤ ì¡°ì–¸ì„ ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤...</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- ì¼ì¼ ê³„íší‘œ í˜ì´ì§€ -->
        <div id="daily-plan" class="page">
            <h1 class="page-title">ğŸ“‹ ì¼ì¼ í•™ìŠµ ê³„íší‘œ</h1>
            
            <div class="daily-planner">
                <div class="date-selector">
                    <label for="plan-date"><strong>ê³„íš ë‚ ì§œ:</strong></label>
                    <input type="date" id="plan-date">
                    <label for="plan-day"><strong>ìš”ì¼:</strong></label>
                    <select id="plan-day">
                        <option value="ì›”">ì›”ìš”ì¼</option>
                        <option value="í™”">í™”ìš”ì¼</option>
                        <option value="ìˆ˜">ìˆ˜ìš”ì¼</option>
                        <option value="ëª©">ëª©ìš”ì¼</option>
                        <option value="ê¸ˆ">ê¸ˆìš”ì¼</option>
                        <option value="í† ">í† ìš”ì¼</option>
                        <option value="ì¼">ì¼ìš”ì¼</option>
                    </select>
                </div>

                <div class="subject-input-grid">
                    <div class="subject-input-card">
                        <div class="subject-input-title">
                            <span>ğŸ“–</span> êµ­ì–´
                        </div>
                        <select class="time-input" id="korean-time">
                            <option value="0">0ë¶„</option>
                            <option value="30">30ë¶„</option>
                            <option value="60">60ë¶„</option>
                            <option value="90">90ë¶„</option>
                            <option value="120">120ë¶„</option>
                            <option value="150">150ë¶„</option>
                            <option value="180">180ë¶„</option>
                            <option value="210">210ë¶„</option>
                            <option value="240">240ë¶„</option>
                        </select>
                    </div>

                    <div class="subject-input-card">
                        <div class="subject-input-title">
                            <span>ğŸŒ</span> ì˜ì–´
                        </div>
                        <select class="time-input" id="english-time">
                            <option value="0">0ë¶„</option>
                            <option value="30">30ë¶„</option>
                            <option value="60">60ë¶„</option>
                            <option value="90">90ë¶„</option>
                            <option value="120">120ë¶„</option>
                            <option value="150">150ë¶„</option>
                            <option value="180">180ë¶„</option>
                            <option value="210">210ë¶„</option>
                            <option value="240">240ë¶„</option>
                        </select>
                    </div>

                    <div class="subject-input-card">
                        <div class="subject-input-title">
                            <span>ğŸ”¢</span> ìˆ˜í•™
                        </div>
                        <select class="time-input" id="math-time">
                            <option value="0">0ë¶„</option>
                            <option value="30">30ë¶„</option>
                            <option value="60">60ë¶„</option>
                            <option value="90">90ë¶„</option>
                            <option value="120">120ë¶„</option>
                            <option value="150">150ë¶„</option>
                            <option value="180">180ë¶„</option>
                            <option value="210">210ë¶„</option>
                            <option value="240">240ë¶„</option>
                        </select>
                    </div>

                    <div class="subject-input-card">
                        <div class="subject-input-title">
                            <span>ğŸ›ï¸</span> ì‚¬íšŒ
                        </div>
                        <select class="time-input" id="social-time">
                            <option value="0">0ë¶„</option>
                            <option value="30">30ë¶„</option>
                            <option value="60">60ë¶„</option>
                            <option value="90">90ë¶„</option>
                            <option value="120">120ë¶„</option>
                            <option value="150">150ë¶„</option>
                            <option value="180">180ë¶„</option>
                            <option value="210">210ë¶„</option>
                            <option value="240">240ë¶„</option>
                        </select>
                    </div>

                    <div class="subject-input-card">
                        <div class="subject-input-title">
                            <span>ğŸ”¬</span> ê³¼í•™
                        </div>
                        <select class="time-input" id="science-time">
                            <option value="0">0ë¶„</option>
                            <option value="30">30ë¶„</option>
                            <option value="60">60ë¶„</option>
                            <option value="90">90ë¶„</option>
                            <option value="120">120ë¶„</option>
                            <option value="150">150ë¶„</option>
                            <option value="180">180ë¶„</option>
                            <option value="210">210ë¶„</option>
                            <option value="240">240ë¶„</option>
                        </select>
                    </div>

                    <div class="subject-input-card">
                        <div class="subject-input-title">
                            <span>ğŸº</span> í•œêµ­ì‚¬
                        </div>
                        <select class="time-input" id="history-time">
                            <option value="0">0ë¶„</option>
                            <option value="30">30ë¶„</option>
                            <option value="60">60ë¶„</option>
                            <option value="90">90ë¶„</option>
                            <option value="120">120ë¶„</option>
                            <option value="150">150ë¶„</option>
                            <option value="180">180ë¶„</option>
                            <option value="210">210ë¶„</option>
                            <option value="240">240ë¶„</option>
                        </select>
                    </div>
                </div>

                <button class="generate-btn" onclick="generateDailySchedule()">ğŸ“… ê³„íší‘œ ì§œê¸°</button>

                <div class="generated-schedule" id="generatedSchedule">
                    <div style="text-align: center; margin-bottom: 20px; font-size: 20px; font-weight: bold;" id="scheduleHeader">
                        ğŸ“… í•™ìŠµ ê³„íší‘œ
                    </div>
                    <div class="schedule-timeline" id="scheduleTimeline">
                        <!-- ìƒì„±ëœ ê³„íší‘œê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
                    </div>
                </div>
            </div>
        </div>

        <!-- íƒ€ì´ë¨¸ í˜ì´ì§€ -->
        <div id="timer" class="page">
            <h1 class="page-title">ğŸ… ë½€ëª¨ë„ë¡œ íƒ€ì´ë¨¸</h1>
            
            <div class="timer-container">
                <div class="timer-display" id="timerDisplay">25:00</div>
                <div style="font-size: 24px; color: #666; margin-bottom: 30px;" id="timerStatus">í•™ìŠµ ì¤€ë¹„ ì™„ë£Œ</div>
                
                <div class="timer-controls">
                    <button class="timer-btn" id="startBtn" onclick="startTimer()">ì‹œì‘</button>
                    <button class="timer-btn" id="pauseBtn" onclick="pauseTimer()" disabled>ì¼ì‹œì •ì§€</button>
                    <button class="timer-btn" id="resetBtn" onclick="resetTimer()">ë¦¬ì…‹</button>
                </div>
                
                <div style="margin-top: 30px; padding: 20px; background: #f8f9fa; border-radius: 15px;">
                    <h3 style="margin-bottom: 15px;">ğŸ“Š ì˜¤ëŠ˜ì˜ ë½€ëª¨ë„ë¡œ</h3>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px;">
                        <div style="text-align: center;">
                            <div style="font-size: 24px; font-weight: bold; color: #4ecdc4;" id="completedPomodoros">0</div>
                            <div>ì™„ë£Œëœ ë½€ëª¨ë„ë¡œ</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-size: 24px; font-weight: bold; color: #ffc107;" id="targetPomodoros">0</div>
                            <div>ëª©í‘œ ë½€ëª¨ë„ë¡œ</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-size: 24px; font-weight: bold; color: #764ba2;" id="studyTime">0ë¶„</div>
                            <div>ì´ í•™ìŠµì‹œê°„</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ì„¤ì • í˜ì´ì§€ -->
        <div id="settings" class="page">
            <h1 class="page-title">âš™ï¸ ê°œì¸ ìŠ¤ì¼€ì¤„ ì„¤ì •</h1>
            
            <div class="settings-section">
                <h2 class="section-title">ğŸ“… ê°œì¸ ìŠ¤ì¼€ì¤„ ì¶”ê°€</h2>
                <p style="margin-bottom: 20px; color: #666;">ì‹ì‚¬, ê°œì¸ ì‚¬ì •, í•™ì›, ê¸°íƒ€ ë“± ê³µë¶€ë¥¼ ì œì™¸í•œ ê°œì¸ ìŠ¤ì¼€ì¤„ì„ ì…ë ¥í•˜ì„¸ìš”. ì´ ì •ë³´ë¥¼ ë°”íƒ•ìœ¼ë¡œ ë” ì •í™•í•œ í•™ìŠµ ê³„íší‘œë¥¼ ìƒì„±í•©ë‹ˆë‹¤.</p>
                
                <div class="schedule-form">
                    <div class="input-group" style="margin-bottom: 0;">
                        <label for="schedule-day">ìš”ì¼</label>
                        <select id="schedule-day">
                            <option value="ì›”">ì›”ìš”ì¼</option>
                            <option value="í™”">í™”ìš”ì¼</option>
                            <option value="ìˆ˜">ìˆ˜ìš”ì¼</option>
                            <option value="ëª©">ëª©ìš”ì¼</option>
                            <option value="ê¸ˆ">ê¸ˆìš”ì¼</option>
                            <option value="í† ">í† ìš”ì¼</option>
                            <option value="ì¼">ì¼ìš”ì¼</option>
                        </select>
                    </div>
                    <div class="input-group" style="margin-bottom: 0;">
                        <label for="schedule-start-time">ì‹œì‘ ì‹œê°„</label>
                        <select id="schedule-start-time">
                            <option value="06:00">06:00</option>
                            <option value="06:30">06:30</option>
                            <option value="07:00">07:00</option>
                            <option value="07:30">07:30</option>
                            <option value="08:00">08:00</option>
                            <option value="08:30">08:30</option>
                            <option value="09:00" selected>09:00</option>
                            <option value="09:30">09:30</option>
                            <option value="10:00">10:00</option>
                            <option value="10:30">10:30</option>
                            <option value="11:00">11:00</option>
                            <option value="11:30">11:30</option>
                            <option value="12:00">12:00</option>
                            <option value="12:30">12:30</option>
                            <option value="13:00">13:00</option>
                            <option value="13:30">13:30</option>
                            <option value="14:00">14:00</option>
                            <option value="14:30">14:30</option>
                            <option value="15:00">15:00</option>
                            <option value="15:30">15:30</option>
                            <option value="16:00">16:00</option>
                            <option value="16:30">16:30</option>
                            <option value="17:00">17:00</option>
                            <option value="17:30">17:30</option>
                            <option value="18:00">18:00</option>
                            <option value="18:30">18:30</option>
                            <option value="19:00">19:00</option>
                            <option value="19:30">19:30</option>
                            <option value="20:00">20:00</option>
                            <option value="20:30">20:30</option>
                            <option value="21:00">21:00</option>
                            <option value="21:30">21:30</option>
                            <option value="22:00">22:00</option>
                        </select>
                    </div>
                    <div class="input-group" style="margin-bottom: 0;">
                        <label for="schedule-end-time">ì¢…ë£Œ ì‹œê°„</label>
                        <select id="schedule-end-time">
                            <option value="06:30">06:30</option>
                            <option value="07:00">07:00</option>
                            <option value="07:30">07:30</option>
                            <option value="08:00">08:00</option>
                            <option value="08:30">08:30</option>
                            <option value="09:00">09:00</option>
                            <option value="09:30">09:30</option>
                            <option value="10:00" selected>10:00</option>
                            <option value="10:30">10:30</option>
                            <option value="11:00">11:00</option>
                            <option value="11:30">11:30</option>
                            <option value="12:00">12:00</option>
                            <option value="12:30">12:30</option>
                            <option value="13:00">13:00</option>
                            <option value="13:30">13:30</option>
                            <option value="14:00">14:00</option>
                            <option value="14:30">14:30</option>
                            <option value="15:00">15:00</option>
                            <option value="15:30">15:30</option>
                            <option value="16:00">16:00</option>
                            <option value="16:30">16:30</option>
                            <option value="17:00">17:00</option>
                            <option value="17:30">17:30</option>
                            <option value="18:00">18:00</option>
                            <option value="18:30">18:30</option>
                            <option value="19:00">19:00</option>
                            <option value="19:30">19:30</option>
                            <option value="20:00">20:00</option>
                            <option value="20:30">20:30</option>
                            <option value="21:00">21:00</option>
                            <option value="21:30">21:30</option>
                            <option value="22:00">22:00</option>
                            <option value="22:30">22:30</option>
                        </select>
                    </div>
                    <div class="input-group" style="margin-bottom: 0;">
                        <label for="schedule-activity">í™œë™</label>
                        <select id="schedule-activity">
                            <option value="ì‹ì‚¬">ì‹ì‚¬</option>
                            <option value="í•™ì›">í•™ì›</option>
                            <option value="ê°œì¸ì‚¬ì •">ê°œì¸ì‚¬ì •</option>
                            <option value="ìš´ë™">ìš´ë™</option>
                            <option value="ê¸°íƒ€">ê¸°íƒ€</option>
                        </select>
                    </div>
                    <button class="add-btn" onclick="addPersonalSchedule()">ì¶”ê°€</button>
                </div>
                
                <div class="schedule-list" id="personalScheduleList">
                    <!-- ì¶”ê°€ëœ ìŠ¤ì¼€ì¤„ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
                </div>
            </div>
        </div>
    </div>

    <script>
        // ì „ì—­ ë³€ìˆ˜
        let currentGrade = 'middle';
        let personalSchedules = [];
        let timerInterval;
        let timeLeft = 25 * 60; // 25ë¶„ (ì´ˆ ë‹¨ìœ„)
        let isRunning = false;
        let completedCount = 0;
        let totalStudyMinutes = 0;

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', () => {
            // ì˜¤ëŠ˜ ë‚ ì§œ ì„¤ì •
            const today = new Date();
            document.getElementById('plan-date').value = today.toISOString().split('T')[0];
            
            // ìš”ì¼ ìë™ ì„¤ì •
            const days = ['ì¼', 'ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ', 'í† '];
            document.getElementById('plan-day').value = days[today.getDay()];
            
            // ì´ˆê¸° ê±´ê°• ìƒíƒœ ì—…ë°ì´íŠ¸
            updateHealthStatus();
            
            // ë„¤ë¹„ê²Œì´ì…˜ ë°” í™œì„±í™”
            document.getElementById('navbar').classList.add('active');
            
            // íƒ€ì´ë¨¸ ì´ˆê¸°í™”
            updateTimerDisplay();
            
            // ê°œì¸ ìŠ¤ì¼€ì¤„ ëª©ë¡ ì´ˆê¸°í™”
            updatePersonalScheduleList();
            
            // ë¸Œë¼ìš°ì € ì•Œë¦¼ ê¶Œí•œ ìš”ì²­
            if ('Notification' in window && Notification.permission === 'default') {
                Notification.requestPermission();
            }
        });

        // ë„¤ë¹„ê²Œì´ì…˜ ë°” ìŠ¤í¬ë¡¤ ì²˜ë¦¬
        let lastScrollY = window.scrollY;
        const navbar = document.getElementById('navbar');

        window.addEventListener('scroll', () => {
            if (window.scrollY < lastScrollY || window.scrollY < 50) {
                navbar.classList.add('active');
            } else {
                navbar.classList.remove('active');
            }
            lastScrollY = window.scrollY;
        });

        // í˜ì´ì§€ ì „í™˜ í•¨ìˆ˜
        function showPage(pageId) {
            // ëª¨ë“  í˜ì´ì§€ ìˆ¨ê¸°ê¸°
            const pages = document.querySelectorAll('.page');
            pages.forEach(page => {
                page.classList.remove('active');
            });

            // ì„ íƒëœ í˜ì´ì§€ ë³´ì´ê¸°
            document.getElementById(pageId).classList.add('active');

            // ë„¤ë¹„ê²Œì´ì…˜ ì•„ì´í…œì˜ active í´ë˜ìŠ¤ ì—…ë°ì´íŠ¸
            const navItems = document.querySelectorAll('.nav-item');
            navItems.forEach(item => {
                item.classList.remove('active');
            });
            event.target.classList.add('active');
        }

        // í•™êµê¸‰ ì„ íƒ í•¨ìˆ˜
        function selectGrade(grade) {
            currentGrade = grade;
            
            // ë²„íŠ¼ ìƒíƒœ ì—…ë°ì´íŠ¸
            document.getElementById('middle-btn').classList.remove('active');
            document.getElementById('high-btn').classList.remove('active');
            
            if (grade === 'middle') {
                document.getElementById('middle-btn').classList.add('active');
            } else {
                document.getElementById('high-btn').classList.add('active');
            }
            
            updateHealthStatus();
        }

        // ê±´ê°• ìƒíƒœ ì—…ë°ì´íŠ¸ í•¨ìˆ˜
        function updateHealthStatus() {
            const sleepTime = parseFloat(document.getElementById('sleep-time').value);
            const privateEducationTime = parseInt(document.getElementById('private-education-time').value);
            const schoolStudyTime = parseInt(document.getElementById('school-study-time').value);
            
            // ìˆ˜ë©´ ìƒíƒœ ë¶„ì„
            updateSleepStatus(sleepTime);
            
            // í•™ìŠµ ë¶€ë‹´ ë¶„ì„
            updateStudyLoadStatus(privateEducationTime, schoolStudyTime);
            
            // ìƒí™œ ê· í˜• ë¶„ì„
            updateBalanceStatus(sleepTime, privateEducationTime, schoolStudyTime);
            
            // AI ì¢…í•© ë¶„ì„
            updateAIAnalysis(sleepTime, privateEducationTime, schoolStudyTime);
        }

        function updateSleepStatus(sleepTime) {
            const sleepIndicator = document.getElementById('sleep-indicator');
            const sleepAdvice = document.getElementById('sleep-advice');
            
            // ì¤‘ê³ ë“±í•™ìƒ ìˆ˜ë©´ ê¸°ì¤€: 6ì‹œê°„ ë¯¸ë§Œ ìœ„í—˜
            if (sleepTime < 6) {
                sleepIndicator.className = 'status-indicator status-danger';
                sleepIndicator.textContent = 'ìœ„í—˜';
                sleepAdvice.textContent = 'ìˆ˜ë©´ ë¶€ì¡±ìœ¼ë¡œ í•™ìŠµ ëŠ¥ë ¥ ì €í•˜, ë©´ì—­ë ¥ ì•½í™”, ì„±ì¥ ì§€ì—°ì´ ìš°ë ¤ë©ë‹ˆë‹¤. ìµœì†Œ 7-8ì‹œê°„ ìˆ˜ë©´ì„ ê¶Œì¥í•©ë‹ˆë‹¤.';
            } else if (sleepTime < 7) {
                sleepIndicator.className = 'status-indicator status-warning';
                sleepIndicator.textContent = 'ì£¼ì˜';
                sleepAdvice.textContent = 'ìˆ˜ë©´ ì‹œê°„ì´ ë‹¤ì†Œ ë¶€ì¡±í•©ë‹ˆë‹¤. ì§‘ì¤‘ë ¥ ì €í•˜ì™€ ìŠ¤íŠ¸ë ˆìŠ¤ ì¦ê°€ ê°€ëŠ¥ì„±ì´ ìˆìŠµë‹ˆë‹¤.';
            } else {
                sleepIndicator.className = 'status-indicator status-safe';
                sleepIndicator.textContent = 'ì–‘í˜¸';
                sleepAdvice.textContent = 'ì¶©ë¶„í•œ ìˆ˜ë©´ì„ ì·¨í•˜ê³  ìˆìŠµë‹ˆë‹¤. ê±´ê°•í•œ í•™ìŠµì„ ìœ„í•œ ì¢‹ì€ ê¸°ë°˜ì…ë‹ˆë‹¤.';
            }
        }

        function updateStudyLoadStatus(privateEducationTime, schoolStudyTime) {
            const studyIndicator = document.getElementById('study-indicator');
            const studyAdvice = document.getElementById('study-advice');
            
            const totalStudyTime = privateEducationTime + schoolStudyTime;
            
            // ì‚¬êµìœ¡ 25ì‹œê°„ ì´ìƒ ë˜ëŠ” ì´ í•™ìŠµì‹œê°„ 35ì‹œê°„ ì´ìƒ ìœ„í—˜
            if (privateEducationTime >= 25 || totalStudyTime >= 35) {
                studyIndicator.className = 'status-indicator status-danger';
                studyIndicator.textContent = 'ê³¼ë¶€í•˜';
                studyAdvice.textContent = 'í•™ìŠµ ì‹œê°„ì´ ê³¼ë„í•©ë‹ˆë‹¤. ë²ˆì•„ì›ƒ, í•™ìŠµ íš¨ìœ¨ì„± ì €í•˜, ê±´ê°• ì•…í™” ìœ„í—˜ì´ ë†’ìŠµë‹ˆë‹¤. ì ì ˆí•œ íœ´ì‹ê³¼ ì‹œê°„ ì¡°ì ˆì´ í•„ìš”í•©ë‹ˆë‹¤.';
            } else if (privateEducationTime >= 20 || totalStudyTime >= 28) {
                studyIndicator.className = 'status-indicator status-warning';
                studyIndicator.textContent = 'ë†’ìŒ';
                studyAdvice.textContent = 'í•™ìŠµ ë¶€ë‹´ì´ ë†’ì€ ìƒíƒœì…ë‹ˆë‹¤. ìŠ¤íŠ¸ë ˆìŠ¤ ê´€ë¦¬ì™€ íš¨ìœ¨ì ì¸ í•™ìŠµë²•ì´ í•„ìš”í•©ë‹ˆë‹¤.';
            } else {
                studyIndicator.className = 'status-indicator status-safe';
                studyIndicator.textContent = 'ì ì •';
                studyAdvice.textContent = 'ê±´ê°•í•œ ìˆ˜ì¤€ì˜ í•™ìŠµ ì‹œê°„ì„ ìœ ì§€í•˜ê³  ìˆìŠµë‹ˆë‹¤.';
            }
        }

        function updateBalanceStatus(sleepTime, privateEducationTime, schoolStudyTime) {
            const balanceIndicator = document.getElementById('balance-indicator');
            const balanceAdvice = document.getElementById('balance-advice');
            
            const totalStudyTime = privateEducationTime + schoolStudyTime;
            const freeTime = 24 * 7 - sleepTime * 7 - totalStudyTime - 35; // 35ì‹œê°„: ì‹ì‚¬, ê¸°íƒ€ í•„ìˆ˜ í™œë™
            
            if (freeTime < 10 || sleepTime < 6) {
                balanceIndicator.className = 'status-indicator status-danger';
                balanceIndicator.textContent = 'ë¶ˆê· í˜•';
                balanceAdvice.textContent = 'í•™ìŠµê³¼ ìƒí™œì˜ ê· í˜•ì´ ê¹¨ì ¸ìˆìŠµë‹ˆë‹¤. ì—¬ê°€ì‹œê°„ í™•ë³´ì™€ ìˆ˜ë©´ì‹œê°„ ì¦ê°€ê°€ í•„ìš”í•©ë‹ˆë‹¤.';
            } else if (freeTime < 20 || sleepTime < 7) {
                balanceIndicator.className = 'status-indicator status-warning';
                balanceIndicator.textContent = 'ì£¼ì˜';
                balanceAdvice.textContent = 'ìƒí™œ ê· í˜•ì— ì£¼ì˜ê°€ í•„ìš”í•©ë‹ˆë‹¤. ì ì ˆí•œ íœ´ì‹ì‹œê°„ì„ í™•ë³´í•˜ì„¸ìš”.';
            } else {
                balanceIndicator.className = 'status-indicator status-safe';
                balanceIndicator.textContent = 'ê· í˜•';
                balanceAdvice.textContent = 'í•™ìŠµê³¼ íœ´ì‹ì˜ ê· í˜•ì´ ì˜ ì¡í˜€ìˆìŠµë‹ˆë‹¤.';
            }
        }

        function updateAIAnalysis(sleepTime, privateEducationTime, schoolStudyTime) {
            const currentStatus = document.getElementById('current-status');
            const riskFactors = document.getElementById('risk-factors');
            const improvements = document.getElementById('improvement-suggestions');
            
            const totalStudyTime = privateEducationTime + schoolStudyTime;
            const gradeText = currentGrade === 'middle' ? 'ì¤‘í•™ìƒ' : 'ê³ ë“±í•™ìƒ';
            
            // í˜„ì¬ ìƒíƒœ ìš”ì•½
            currentStatus.textContent = `${gradeText}ìœ¼ë¡œ ì£¼ ${totalStudyTime}ì‹œê°„ í•™ìŠµ, í‰ê·  ${sleepTime}ì‹œê°„ ìˆ˜ë©´ ì¤‘ì…ë‹ˆë‹¤. ì‚¬êµìœ¡ ${privateEducationTime}ì‹œê°„, êµë‚´í•™ìŠµ ${schoolStudyTime}ì‹œê°„ìœ¼ë¡œ êµ¬ì„±ë˜ì–´ ìˆìŠµë‹ˆë‹¤.`;
            
            // ìœ„í—˜ ìš”ì†Œ ë¶„ì„
            let risks = [];
            if (sleepTime < 6) risks.push('ì‹¬ê°í•œ ìˆ˜ë©´ë¶€ì¡±ìœ¼ë¡œ ì¸í•œ í•™ìŠµëŠ¥ë ¥ ì €í•˜ ë° ê±´ê°• ì•…í™”');
            if (privateEducationTime >= 25) risks.push('ê³¼ë„í•œ ì‚¬êµìœ¡ìœ¼ë¡œ ì¸í•œ ë²ˆì•„ì›ƒ ìœ„í—˜');
            if (totalStudyTime >= 35) risks.push('ì´ í•™ìŠµì‹œê°„ ê³¼ë¶€í•˜ë¡œ ì¸í•œ ìŠ¤íŠ¸ë ˆìŠ¤ ì¦ê°€');
            if (sleepTime < 7 && totalStudyTime >= 28) risks.push('ìˆ˜ë©´ë¶€ì¡±ê³¼ ê³¼ë„í•œ í•™ìŠµì˜ ë³µí•©ì  ìœ„í—˜');
            
            if (risks.length === 0) {
                riskFactors.textContent = 'í˜„ì¬ í° ìœ„í—˜ ìš”ì†ŒëŠ” ë°œê²¬ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. í˜„ì¬ íŒ¨í„´ì„ ìœ ì§€í•˜ì„¸ìš”.';
            } else {
                riskFactors.textContent = risks.join(', ') + 'ê°€ ì˜ˆìƒë©ë‹ˆë‹¤.';
            }
            
            // ê°œì„  ì œì•ˆ
            let suggestions = [];
            if (sleepTime < 7) suggestions.push('ìˆ˜ë©´ì‹œê°„ì„ 7-8ì‹œê°„ìœ¼ë¡œ ëŠ˜ë¦¬ê¸°');
            if (privateEducationTime >= 20) suggestions.push('ì‚¬êµìœ¡ ì‹œê°„ ë‹¨ê³„ì  ê°ì¶•');
            if (totalStudyTime >= 30) suggestions.push('í•™ìŠµ íš¨ìœ¨ì„± í–¥ìƒì„ í†µí•œ ì‹œê°„ ë‹¨ì¶•');
            suggestions.push('ë½€ëª¨ë„ë¡œ ê¸°ë²•ì„ í™œìš©í•œ ì§‘ì¤‘ í•™ìŠµ');
            suggestions.push('ê·œì¹™ì ì¸ ìš´ë™ê³¼ ìŠ¤íŠ¸ë ˆìŠ¤ ê´€ë¦¬');
            
            improvements.textContent = suggestions.join(', ') + 'ì„ ê¶Œì¥í•©ë‹ˆë‹¤.';
        }

        // ì‹œê°„ì„ ë¶„ìœ¼ë¡œ ë³€í™˜í•˜ëŠ” í•¨ìˆ˜
        function timeToMinutes(timeStr) {
            const [hours, minutes] = timeStr.split(':').map(Number);
            return hours * 60 + minutes;
        }

        // ë¶„ì„ ì‹œê°„ìœ¼ë¡œ ë³€í™˜í•˜ëŠ” í•¨ìˆ˜
        function minutesToTime(minutes) {
            const hours = Math.floor(minutes / 60);
            const mins = minutes % 60;
            return `${String(hours).padStart(2, '0')}:${String(mins).padStart(2, '0')}`;
        }

        // ì¼ì¼ ê³„íší‘œ ìƒì„± í•¨ìˆ˜
        function generateDailySchedule() {
            const subjects = [
                { name: 'êµ­ì–´', emoji: 'ğŸ“–', time: parseInt(document.getElementById('korean-time').value) || 0 },
                { name: 'ì˜ì–´', emoji: 'ğŸŒ', time: parseInt(document.getElementById('english-time').value) || 0 },
                { name: 'ìˆ˜í•™', emoji: 'ğŸ”¢', time: parseInt(document.getElementById('math-time').value) || 0 },
                { name: 'ì‚¬íšŒ', emoji: 'ğŸ›ï¸', time: parseInt(document.getElementById('social-time').value) || 0 },
                { name: 'ê³¼í•™', emoji: 'ğŸ”¬', time: parseInt(document.getElementById('science-time').value) || 0 },
                { name: 'í•œêµ­ì‚¬', emoji: 'ğŸº', time: parseInt(document.getElementById('history-time').value) || 0 }
            ];

            const selectedDay = document.getElementById('plan-day').value;
            const selectedDate = document.getElementById('plan-date').value;

            // 0ë¶„ì¸ ê³¼ëª© ì œì™¸
            const activeSubjects = subjects.filter(subject => subject.time > 0);

            if (activeSubjects.length === 0) {
                alert('ìµœì†Œ í•˜ë‚˜ ì´ìƒì˜ ê³¼ëª©ì— í•™ìŠµ ì‹œê°„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”!');
                return;
            }

            // í•´ë‹¹ ìš”ì¼ì˜ ê°œì¸ ìŠ¤ì¼€ì¤„ ê°€ì ¸ì˜¤ê¸°
            const daySchedules = personalSchedules.filter(schedule => schedule.day === selectedDay);

            // ê³„íší‘œ ìƒì„±
            const timeline = [];
            let currentTimeMinutes = 9 * 60; // ì˜¤ì „ 9ì‹œ ì‹œì‘ (ë¶„ ë‹¨ìœ„)

            // ê°œì¸ ìŠ¤ì¼€ì¤„ì„ ì‹œê°„ìˆœìœ¼ë¡œ ì •ë ¬
            daySchedules.sort((a, b) => {
                return timeToMinutes(a.startTime) - timeToMinutes(b.startTime);
            });

            let scheduleIndex = 0;
            let subjectIndex = 0;
            let remainingTimeForSubject = activeSubjects.length > 0 ? activeSubjects[0].time : 0;
            let totalStudyBlocks = 0;

            while (subjectIndex < activeSubjects.length) {
                // ê°œì¸ ìŠ¤ì¼€ì¤„ í™•ì¸
                if (scheduleIndex < daySchedules.length) {
                    const nextSchedule = daySchedules[scheduleIndex];
                    const scheduleStartMinutes = timeToMinutes(nextSchedule.startTime);
                    const scheduleEndMinutes = timeToMinutes(nextSchedule.endTime);

                    if (currentTimeMinutes >= scheduleStartMinutes) {
                        // ê°œì¸ ìŠ¤ì¼€ì¤„ ì‹œê°„
                        timeline.push({
                            time: nextSchedule.startTime + ' - ' + nextSchedule.endTime,
                            activity: nextSchedule.activity,
                            type: 'personal'
                        });

                        currentTimeMinutes = scheduleEndMinutes;
                        scheduleIndex++;
                        continue;
                    }
                }

                if (remainingTimeForSubject > 0) {
                    const studyDuration = Math.min(25, remainingTimeForSubject); // 25ë¶„ ë˜ëŠ” ë‚¨ì€ ì‹œê°„
                    const endTimeMinutes = currentTimeMinutes + studyDuration;

                    timeline.push({
                        time: minutesToTime(currentTimeMinutes) + ' - ' + minutesToTime(endTimeMinutes),
                        activity: `${activeSubjects[subjectIndex].emoji} ${activeSubjects[subjectIndex].name} í•™ìŠµ`,
                        type: 'study'
                    });

                    remainingTimeForSubject -= studyDuration;
                    currentTimeMinutes = endTimeMinutes;
                    totalStudyBlocks++;

                    // 5ë¶„ íœ´ì‹ (ë§ˆì§€ë§‰ ê³µë¶€ ì„¸ì…˜ì´ ì•„ë‹Œ ê²½ìš°)
                    if (remainingTimeForSubject > 0 || subjectIndex < activeSubjects.length - 1) {
                        const breakEndMinutes = currentTimeMinutes + 5;
                        timeline.push({
                            time: minutesToTime(currentTimeMinutes) + ' - ' + minutesToTime(breakEndMinutes),
                            activity: 'â˜• íœ´ì‹',
                            type: 'break'
                        });
                        currentTimeMinutes = breakEndMinutes;
                    }

                    // í˜„ì¬ ê³¼ëª© ì™„ë£Œ ì‹œ ë‹¤ìŒ ê³¼ëª©ìœ¼ë¡œ
                    if (remainingTimeForSubject <= 0) {
                        subjectIndex++;
                        if (subjectIndex < activeSubjects.length) {
                            remainingTimeForSubject = activeSubjects[subjectIndex].time;
                            
                            // ê³¼ëª© ë³€ê²½ ì‹œ ê¸´ íœ´ì‹ (15ë¶„)
                            const longBreakEndMinutes = currentTimeMinutes + 15;
                            timeline.push({
                                time: minutesToTime(currentTimeMinutes) + ' - ' + minutesToTime(longBreakEndMinutes),
                                activity: 'ğŸŒŸ ê¸´ íœ´ì‹',
                                type: 'long-break'
                            });
                            currentTimeMinutes = longBreakEndMinutes;
                        }
                    }
                }
            }

            // ê²°ê³¼ í‘œì‹œ
            displaySchedule(timeline, selectedDate, selectedDay, totalStudyBlocks);
        }

        function displaySchedule(timeline, date, day, studyBlocks) {
            const scheduleDiv = document.getElementById('generatedSchedule');
            const headerDiv = document.getElementById('scheduleHeader');
            const timelineDiv = document.getElementById('scheduleTimeline');

            // ë‚ ì§œ í˜•ì‹ ë³€í™˜
            const dateObj = new Date(date);
            const formattedDate = `${dateObj.getFullYear()}ë…„ ${dateObj.getMonth() + 1}ì›” ${dateObj.getDate()}ì¼`;

            headerDiv.textContent = `ğŸ“… ${formattedDate} ${day}ìš”ì¼ í•™ìŠµ ê³„íší‘œ`;

            // íƒ€ì„ë¼ì¸ ìƒì„±
            timelineDiv.innerHTML = '';
            timeline.forEach(item => {
                const blockDiv = document.createElement('div');
                blockDiv.className = `schedule-block ${item.type}`;
                blockDiv.innerHTML = `
                    <span class="schedule-time">${item.time}</span>
                    <span>${item.activity}</span>
                `;
                timelineDiv.appendChild(blockDiv);
            });

            scheduleDiv.style.display = 'block';

            // ëª©í‘œ ë½€ëª¨ë„ë¡œ ìˆ˜ ì—…ë°ì´íŠ¸
            document.getElementById('targetPomodoros').textContent = studyBlocks;
        }

        // ê°œì¸ ìŠ¤ì¼€ì¤„ ì¶”ê°€ í•¨ìˆ˜
        function addPersonalSchedule() {
            const day = document.getElementById('schedule-day').value;
            const startTime = document.getElementById('schedule-start-time').value;
            const endTime = document.getElementById('schedule-end-time').value;
            const activity = document.getElementById('schedule-activity').value;

            if (timeToMinutes(startTime) >= timeToMinutes(endTime)) {
                alert('ì¢…ë£Œ ì‹œê°„ì´ ì‹œì‘ ì‹œê°„ë³´ë‹¤ ëŠ¦ì–´ì•¼ í•©ë‹ˆë‹¤!');
                return;
            }

            const schedule = {
                day: day,
                startTime: startTime,
                endTime: endTime,
                activity: activity
            };

            personalSchedules.push(schedule);
            updatePersonalScheduleList();

            // ì…ë ¥ í•„ë“œ ì´ˆê¸°í™”
            document.getElementById('schedule-start-time').value = '09:00';
            document.getElementById('schedule-end-time').value = '10:00';
        }

        function updatePersonalScheduleList() {
            const listDiv = document.getElementById('personalScheduleList');
            listDiv.innerHTML = '';

            if (personalSchedules.length === 0) {
                listDiv.innerHTML = '<p style="text-align: center; color: #666; margin: 20px 0;">ë“±ë¡ëœ ê°œì¸ ìŠ¤ì¼€ì¤„ì´ ì—†ìŠµë‹ˆë‹¤.</p>';
                return;
            }

            personalSchedules.forEach((schedule, index) => {
                const itemDiv = document.createElement('div');
                itemDiv.className = 'schedule-item';
                itemDiv.innerHTML = `
                    <span><strong>${schedule.day}ìš”ì¼</strong> ${schedule.startTime} - ${schedule.endTime} | ${schedule.activity}</span>
                    <button class="remove-btn" onclick="removePersonalSchedule(${index})">ì‚­ì œ</button>
                `;
                listDiv.appendChild(itemDiv);
            });
        }

        function removePersonalSchedule(index) {
            personalSchedules.splice(index, 1);
            updatePersonalScheduleList();
        }

        // íƒ€ì´ë¨¸ ê´€ë ¨ í•¨ìˆ˜ë“¤
        function updateTimerDisplay() {
            const minutes = Math.floor(timeLeft / 60);
            const seconds = timeLeft % 60;
            document.getElementById('timerDisplay').textContent = 
                `${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
        }

        function startTimer() {
            if (isRunning) return;
            
            isRunning = true;
            document.getElementById('startBtn').disabled = true;
            document.getElementById('pauseBtn').disabled = false;
            document.getElementById('timerStatus').textContent = 'ğŸ… ì§‘ì¤‘ í•™ìŠµ ì¤‘...';

            timerInterval = setInterval(() => {
                timeLeft--;
                updateTimerDisplay();

                if (timeLeft <= 0) {
                    completePomodoro();
                }
            }, 1000);
        }

        function pauseTimer() {
            if (!isRunning) return;
            
            clearInterval(timerInterval);
            isRunning = false;
            document.getElementById('startBtn').disabled = false;
            document.getElementById('pauseBtn').disabled = true;
            document.getElementById('timerStatus').textContent = 'â¸ï¸ ì¼ì‹œì •ì§€ë¨';
        }

        function resetTimer() {
            clearInterval(timerInterval);
            isRunning = false;
            timeLeft = 25 * 60;
            updateTimerDisplay();
            document.getElementById('startBtn').disabled = false;
            document.getElementById('pauseBtn').disabled = true;
            document.getElementById('timerStatus').textContent = 'í•™ìŠµ ì¤€ë¹„ ì™„ë£Œ';
        }

        function completePomodoro() {
            clearInterval(timerInterval);
            isRunning = false;
            completedCount++;
            totalStudyMinutes += 25;
            
            document.getElementById('completedPomodoros').textContent = completedCount;
            document.getElementById('studyTime').textContent = totalStudyMinutes + 'ë¶„';
            document.getElementById('startBtn').disabled = false;
            document.getElementById('pauseBtn').disabled = true;
            document.getElementById('timerStatus').textContent = 'ğŸ‰ ë½€ëª¨ë„ë¡œ ì™„ë£Œ! 5ë¶„ íœ´ì‹í•˜ì„¸ìš”.';
            
            // ì•Œë¦¼
            if ('Notification' in window && Notification.permission === 'granted') {
                new Notification('ğŸ… ë½€ëª¨ë„ë¡œ ì™„ë£Œ!', {
                    body: '25ë¶„ ì§‘ì¤‘ í•™ìŠµì„ ì™„ë£Œí–ˆìŠµë‹ˆë‹¤. 5ë¶„ íœ´ì‹ì„ ì·¨í•˜ì„¸ìš”.',
                    icon: '/favicon.ico'
                });
            }
            
            // íƒ€ì´ë¨¸ ë¦¬ì…‹
            timeLeft = 25 * 60;
            updateTimerDisplay();
        }
    </script>
</body>
</html>