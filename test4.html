<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>건강한 학습 AI 스터디 플래너</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* 네비게이션 바 */
        .navbar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 80px;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 20px rgba(0,0,0,0.1);
            transform: translateY(-60px);
            transition: transform 0.3s ease;
        }

        .navbar:hover, .navbar.active {
            transform: translateY(0);
        }

        .nav-menu {
            display: flex;
            gap: 30px;
        }

        .nav-item {
            padding: 12px 24px;
            background: linear-gradient(135deg, #4ecdc4, #44a08d);
            color: white;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
        }

        .nav-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .nav-item.active {
            background: linear-gradient(135deg, #ff6b6b, #ee5a52);
        }

        /* 컨테이너 */
        .container {
            margin-top: 100px;
            max-width: 1400px;
            margin-left: auto;
            margin-right: auto;
            padding: 20px;
        }

        .page {
            display: none;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            padding: 40px;
            animation: fadeIn 0.5s ease;
        }

        .page.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .page-title {
            font-size: 28px;
            color: #333;
            margin-bottom: 30px;
            text-align: center;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        /* 메인 페이지 */
        .main-dashboard {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        .profile-section {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border-radius: 20px;
            padding: 30px;
        }

        .health-status {
            background: #f8f9fa;
            border-radius: 20px;
            padding: 30px;
        }

        .grade-selector {
            margin-bottom: 20px;
        }

        .grade-buttons {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }

        .grade-btn {
            padding: 10px 20px;
            border: 2px solid white;
            background: transparent;
            color: white;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .grade-btn.active {
            background: white;
            color: #667eea;
        }

        .status-card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 15px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }

        .status-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .status-indicator {
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 14px;
        }

        .status-safe { background: #d4edda; color: #155724; }
        .status-warning { background: #fff3cd; color: #856404; }
        .status-danger { background: #f8d7da; color: #721c24; }

        .input-group {
            margin-bottom: 15px;
        }

        .input-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: white;
        }

        .health-status .input-group label {
            color: #333;
        }

        .input-group input, .input-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 14px;
            background: white;
            transition: border-color 0.3s ease;
        }

        .input-group input:focus, .input-group select:focus {
            outline: none;
            border-color: #4ecdc4;
        }

        /* AI 분석 패널 */
        .ai-analysis {
            background: linear-gradient(135deg, #ff6b6b, #ee5a52);
            color: white;
            border-radius: 20px;
            padding: 30px;
            margin-top: 20px;
        }

        .analysis-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .analysis-card {
            background: rgba(255,255,255,0.15);
            padding: 20px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
        }

        /* 일일 계획표 페이지 */
        .daily-planner {
            margin-bottom: 30px;
        }

        .date-selector {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 20px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .subject-input-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .subject-input-card {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }

        .subject-input-title {
            font-size: 18px;
            font-weight: bold;
            color: #333;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .time-input {
            width: 100%;
            padding: 10px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 14px;
            text-align: center;
        }

        .generate-btn {
            display: block;
            margin: 20px auto;
            padding: 15px 40px;
            background: linear-gradient(135deg, #ff6b6b, #ee5a52);
            color: white;
            border: none;
            border-radius: 25px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .generate-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        /* 생성된 계획표 */
        .generated-schedule {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border-radius: 15px;
            padding: 30px;
            margin-top: 20px;
            display: none;
        }

        .schedule-timeline {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .schedule-block {
            display: flex;
            align-items: center;
            padding: 12px 20px;
            border-radius: 10px;
            font-weight: 500;
        }

        .schedule-block.study {
            background: rgba(78, 205, 196, 0.8);
        }

        .schedule-block.break {
            background: rgba(255, 217, 61, 0.8);
            color: #333;
        }

        .schedule-block.long-break {
            background: rgba(255, 107, 107, 0.8);
        }

        .schedule-block.personal {
            background: rgba(156, 39, 176, 0.8);
        }

        .schedule-time {
            font-weight: bold;
            margin-right: 15px;
            min-width: 100px;
        }

        /* 타이머 페이지 */
        .timer-container {
            text-align: center;
            padding: 50px;
        }

        .timer-display {
            font-size: 72px;
            font-weight: bold;
            color: #333;
            margin-bottom: 30px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .timer-controls {
            display: flex;
            gap: 20px;
            justify-content: center;
            margin-bottom: 30px;
        }

        .timer-btn {
            background: linear-gradient(135deg, #4ecdc4, #44a08d);
            border: none;
            color: white;
            padding: 15px 30px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 18px;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .timer-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .timer-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        /* 설정 페이지 */
        .settings-section {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
        }

        .section-title {
            font-size: 20px;
            font-weight: bold;
            color: #333;
            margin-bottom: 20px;
            border-bottom: 3px solid #4ecdc4;
            padding-bottom: 10px;
        }

        .schedule-form {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr 1fr auto;
            gap: 15px;
            align-items: end;
            margin-bottom: 20px;
        }

        .add-btn {
            background: #4ecdc4;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .add-btn:hover {
            background: #44a08d;
            transform: translateY(-1px);
        }

        .schedule-list {
            max-height: 400px;
            overflow-y: auto;
        }

        .schedule-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            background: white;
            border-radius: 8px;
            margin-bottom: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .remove-btn {
            background: #ff6b6b;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .remove-btn:hover {
            background: #ee5a52;
            transform: translateY(-1px);
        }

        /* 반응형 */
        @media (max-width: 768px) {
            .nav-menu {
                flex-wrap: wrap;
                gap: 10px;
            }
            
            .nav-item {
                font-size: 14px;
                padding: 8px 16px;
            }
            
            .main-dashboard {
                grid-template-columns: 1fr;
            }
            
            .subject-input-grid {
                grid-template-columns: 1fr;
            }
            
            .timer-display {
                font-size: 48px;
            }

            .date-selector {
                flex-direction: column;
                gap: 10px;
            }

            .schedule-form {
                grid-template-columns: 1fr;
                gap: 10px;
            }
        }
    </style>
</head>
<body>
    <nav class="navbar" id="navbar">
        <div class="nav-menu">
            <button class="nav-item active" onclick="showPage('main')">🏠 메인</button>
            <button class="nav-item" onclick="showPage('daily-plan')">📋 일일계획</button>
            <button class="nav-item" onclick="showPage('timer')">🍅 타이머</button>
            <button class="nav-item" onclick="showPage('settings')">⚙️ 설정</button>
        </div>
    </nav>

    <div class="container">
        <!-- 메인 페이지 -->
        <div id="main" class="page active">
            <h1 class="page-title">🏠 건강한 학습 대시보드</h1>
            
            <div class="main-dashboard">
                <div class="profile-section">
                    <h2 style="margin-bottom: 20px;">👤 학생 정보</h2>
                    
                    <div class="grade-selector">
                        <label>학교급 선택:</label>
                        <div class="grade-buttons">
                            <button class="grade-btn active" id="middle-btn" onclick="selectGrade('middle')">중학생</button>
                            <button class="grade-btn" id="high-btn" onclick="selectGrade('high')">고등학생</button>
                        </div>
                    </div>

                    <div class="input-group">
                        <label for="sleep-time">평균 수면시간 (시간)</label>
                        <select id="sleep-time" onchange="updateHealthStatus()">
                            <option value="4">4시간</option>
                            <option value="4.5">4.5시간</option>
                            <option value="5">5시간</option>
                            <option value="5.5">5.5시간</option>
                            <option value="6">6시간</option>
                            <option value="6.5">6.5시간</option>
                            <option value="7" selected>7시간</option>
                            <option value="7.5">7.5시간</option>
                            <option value="8">8시간</option>
                            <option value="8.5">8.5시간</option>
                            <option value="9">9시간</option>
                            <option value="9.5">9.5시간</option>
                            <option value="10">10시간</option>
                        </select>
                    </div>

                    <div class="input-group">
                        <label for="private-education-time">주간 사교육 시간 (시간)</label>
                        <select id="private-education-time" onchange="updateHealthStatus()">
                            <option value="0">0시간</option>
                            <option value="5">5시간</option>
                            <option value="10">10시간</option>
                            <option value="15" selected>15시간</option>
                            <option value="20">20시간</option>
                            <option value="25">25시간</option>
                            <option value="30">30시간</option>
                            <option value="35">35시간</option>
                            <option value="40">40시간</option>
                            <option value="45">45시간</option>
                            <option value="50">50시간</option>
                        </select>
                    </div>

                    <div class="input-group">
                        <label for="school-study-time">교내 자율학습 시간 (시간/주)</label>
                        <select id="school-study-time" onchange="updateHealthStatus()">
                            <option value="0">0시간</option>
                            <option value="5">5시간</option>
                            <option value="10" selected>10시간</option>
                            <option value="15">15시간</option>
                            <option value="20">20시간</option>
                            <option value="25">25시간</option>
                            <option value="30">30시간</option>
                        </select>
                    </div>
                </div>

                <div class="health-status">
                    <h2 style="margin-bottom: 20px; color: #333;">🏥 건강 상태 분석</h2>
                    
                    <div class="status-card" id="sleep-status">
                        <div class="status-header">
                            <span><strong>😴 수면 상태</strong></span>
                            <span class="status-indicator status-safe" id="sleep-indicator">양호</span>
                        </div>
                        <p id="sleep-advice">충분한 수면을 취하고 있습니다.</p>
                    </div>

                    <div class="status-card" id="study-load-status">
                        <div class="status-header">
                            <span><strong>📚 학습 부담</strong></span>
                            <span class="status-indicator status-safe" id="study-indicator">적정</span>
                        </div>
                        <p id="study-advice">건강한 학습 시간을 유지하고 있습니다.</p>
                    </div>

                    <div class="status-card" id="balance-status">
                        <div class="status-header">
                            <span><strong>⚖️ 생활 균형</strong></span>
                            <span class="status-indicator status-safe" id="balance-indicator">균형</span>
                        </div>
                        <p id="balance-advice">학습과 휴식의 균형이 잘 잡혀있습니다.</p>
                    </div>
                </div>
            </div>

            <div class="ai-analysis">
                <h2 style="text-align: center; margin-bottom: 20px;">🤖 AI 종합 분석 및 맞춤 조언</h2>
                <div class="analysis-grid">
                    <div class="analysis-card">
                        <h3 style="margin-bottom: 15px;">📊 현재 상태 요약</h3>
                        <p id="current-status">학습 패턴을 분석 중입니다...</p>
                    </div>
                    
                    <div class="analysis-card">
                        <h3 style="margin-bottom: 15px;">⚠️ 위험 요소</h3>
                        <p id="risk-factors">위험 요소를 분석 중입니다...</p>
                    </div>
                    
                    <div class="analysis-card">
                        <h3 style="margin-bottom: 15px;">💡 개선 제안</h3>
                        <p id="improvement-suggestions">맞춤 조언을 준비 중입니다...</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- 일일 계획표 페이지 -->
        <div id="daily-plan" class="page">
            <h1 class="page-title">📋 일일 학습 계획표</h1>
            
            <div class="daily-planner">
                <div class="date-selector">
                    <label for="plan-date"><strong>계획 날짜:</strong></label>
                    <input type="date" id="plan-date">
                    <label for="plan-day"><strong>요일:</strong></label>
                    <select id="plan-day">
                        <option value="월">월요일</option>
                        <option value="화">화요일</option>
                        <option value="수">수요일</option>
                        <option value="목">목요일</option>
                        <option value="금">금요일</option>
                        <option value="토">토요일</option>
                        <option value="일">일요일</option>
                    </select>
                </div>

                <div class="subject-input-grid">
                    <div class="subject-input-card">
                        <div class="subject-input-title">
                            <span>📖</span> 국어
                        </div>
                        <select class="time-input" id="korean-time">
                            <option value="0">0분</option>
                            <option value="30">30분</option>
                            <option value="60">60분</option>
                            <option value="90">90분</option>
                            <option value="120">120분</option>
                            <option value="150">150분</option>
                            <option value="180">180분</option>
                            <option value="210">210분</option>
                            <option value="240">240분</option>
                        </select>
                    </div>

                    <div class="subject-input-card">
                        <div class="subject-input-title">
                            <span>🌍</span> 영어
                        </div>
                        <select class="time-input" id="english-time">
                            <option value="0">0분</option>
                            <option value="30">30분</option>
                            <option value="60">60분</option>
                            <option value="90">90분</option>
                            <option value="120">120분</option>
                            <option value="150">150분</option>
                            <option value="180">180분</option>
                            <option value="210">210분</option>
                            <option value="240">240분</option>
                        </select>
                    </div>

                    <div class="subject-input-card">
                        <div class="subject-input-title">
                            <span>🔢</span> 수학
                        </div>
                        <select class="time-input" id="math-time">
                            <option value="0">0분</option>
                            <option value="30">30분</option>
                            <option value="60">60분</option>
                            <option value="90">90분</option>
                            <option value="120">120분</option>
                            <option value="150">150분</option>
                            <option value="180">180분</option>
                            <option value="210">210분</option>
                            <option value="240">240분</option>
                        </select>
                    </div>

                    <div class="subject-input-card">
                        <div class="subject-input-title">
                            <span>🏛️</span> 사회
                        </div>
                        <select class="time-input" id="social-time">
                            <option value="0">0분</option>
                            <option value="30">30분</option>
                            <option value="60">60분</option>
                            <option value="90">90분</option>
                            <option value="120">120분</option>
                            <option value="150">150분</option>
                            <option value="180">180분</option>
                            <option value="210">210분</option>
                            <option value="240">240분</option>
                        </select>
                    </div>

                    <div class="subject-input-card">
                        <div class="subject-input-title">
                            <span>🔬</span> 과학
                        </div>
                        <select class="time-input" id="science-time">
                            <option value="0">0분</option>
                            <option value="30">30분</option>
                            <option value="60">60분</option>
                            <option value="90">90분</option>
                            <option value="120">120분</option>
                            <option value="150">150분</option>
                            <option value="180">180분</option>
                            <option value="210">210분</option>
                            <option value="240">240분</option>
                        </select>
                    </div>

                    <div class="subject-input-card">
                        <div class="subject-input-title">
                            <span>🏺</span> 한국사
                        </div>
                        <select class="time-input" id="history-time">
                            <option value="0">0분</option>
                            <option value="30">30분</option>
                            <option value="60">60분</option>
                            <option value="90">90분</option>
                            <option value="120">120분</option>
                            <option value="150">150분</option>
                            <option value="180">180분</option>
                            <option value="210">210분</option>
                            <option value="240">240분</option>
                        </select>
                    </div>
                </div>

                <button class="generate-btn" onclick="generateDailySchedule()">📅 계획표 짜기</button>

                <div class="generated-schedule" id="generatedSchedule">
                    <div style="text-align: center; margin-bottom: 20px; font-size: 20px; font-weight: bold;" id="scheduleHeader">
                        📅 학습 계획표
                    </div>
                    <div class="schedule-timeline" id="scheduleTimeline">
                        <!-- 생성된 계획표가 여기에 표시됩니다 -->
                    </div>
                </div>
            </div>
        </div>

        <!-- 타이머 페이지 -->
        <div id="timer" class="page">
            <h1 class="page-title">🍅 뽀모도로 타이머</h1>
            
            <div class="timer-container">
                <div class="timer-display" id="timerDisplay">25:00</div>
                <div style="font-size: 24px; color: #666; margin-bottom: 30px;" id="timerStatus">학습 준비 완료</div>
                
                <div class="timer-controls">
                    <button class="timer-btn" id="startBtn" onclick="startTimer()">시작</button>
                    <button class="timer-btn" id="pauseBtn" onclick="pauseTimer()" disabled>일시정지</button>
                    <button class="timer-btn" id="resetBtn" onclick="resetTimer()">리셋</button>
                </div>
                
                <div style="margin-top: 30px; padding: 20px; background: #f8f9fa; border-radius: 15px;">
                    <h3 style="margin-bottom: 15px;">📊 오늘의 뽀모도로</h3>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px;">
                        <div style="text-align: center;">
                            <div style="font-size: 24px; font-weight: bold; color: #4ecdc4;" id="completedPomodoros">0</div>
                            <div>완료된 뽀모도로</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-size: 24px; font-weight: bold; color: #ffc107;" id="targetPomodoros">0</div>
                            <div>목표 뽀모도로</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-size: 24px; font-weight: bold; color: #764ba2;" id="studyTime">0분</div>
                            <div>총 학습시간</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 설정 페이지 -->
        <div id="settings" class="page">
            <h1 class="page-title">⚙️ 개인 스케줄 설정</h1>
            
            <div class="settings-section">
                <h2 class="section-title">📅 개인 스케줄 추가</h2>
                <p style="margin-bottom: 20px; color: #666;">식사, 개인 사정, 학원, 기타 등 공부를 제외한 개인 스케줄을 입력하세요. 이 정보를 바탕으로 더 정확한 학습 계획표를 생성합니다.</p>
                
                <div class="schedule-form">
                    <div class="input-group" style="margin-bottom: 0;">
                        <label for="schedule-day">요일</label>
                        <select id="schedule-day">
                            <option value="월">월요일</option>
                            <option value="화">화요일</option>
                            <option value="수">수요일</option>
                            <option value="목">목요일</option>
                            <option value="금">금요일</option>
                            <option value="토">토요일</option>
                            <option value="일">일요일</option>
                        </select>
                    </div>
                    <div class="input-group" style="margin-bottom: 0;">
                        <label for="schedule-start-time">시작 시간</label>
                        <select id="schedule-start-time">
                            <option value="06:00">06:00</option>
                            <option value="06:30">06:30</option>
                            <option value="07:00">07:00</option>
                            <option value="07:30">07:30</option>
                            <option value="08:00">08:00</option>
                            <option value="08:30">08:30</option>
                            <option value="09:00" selected>09:00</option>
                            <option value="09:30">09:30</option>
                            <option value="10:00">10:00</option>
                            <option value="10:30">10:30</option>
                            <option value="11:00">11:00</option>
                            <option value="11:30">11:30</option>
                            <option value="12:00">12:00</option>
                            <option value="12:30">12:30</option>
                            <option value="13:00">13:00</option>
                            <option value="13:30">13:30</option>
                            <option value="14:00">14:00</option>
                            <option value="14:30">14:30</option>
                            <option value="15:00">15:00</option>
                            <option value="15:30">15:30</option>
                            <option value="16:00">16:00</option>
                            <option value="16:30">16:30</option>
                            <option value="17:00">17:00</option>
                            <option value="17:30">17:30</option>
                            <option value="18:00">18:00</option>
                            <option value="18:30">18:30</option>
                            <option value="19:00">19:00</option>
                            <option value="19:30">19:30</option>
                            <option value="20:00">20:00</option>
                            <option value="20:30">20:30</option>
                            <option value="21:00">21:00</option>
                            <option value="21:30">21:30</option>
                            <option value="22:00">22:00</option>
                        </select>
                    </div>
                    <div class="input-group" style="margin-bottom: 0;">
                        <label for="schedule-end-time">종료 시간</label>
                        <select id="schedule-end-time">
                            <option value="06:30">06:30</option>
                            <option value="07:00">07:00</option>
                            <option value="07:30">07:30</option>
                            <option value="08:00">08:00</option>
                            <option value="08:30">08:30</option>
                            <option value="09:00">09:00</option>
                            <option value="09:30">09:30</option>
                            <option value="10:00" selected>10:00</option>
                            <option value="10:30">10:30</option>
                            <option value="11:00">11:00</option>
                            <option value="11:30">11:30</option>
                            <option value="12:00">12:00</option>
                            <option value="12:30">12:30</option>
                            <option value="13:00">13:00</option>
                            <option value="13:30">13:30</option>
                            <option value="14:00">14:00</option>
                            <option value="14:30">14:30</option>
                            <option value="15:00">15:00</option>
                            <option value="15:30">15:30</option>
                            <option value="16:00">16:00</option>
                            <option value="16:30">16:30</option>
                            <option value="17:00">17:00</option>
                            <option value="17:30">17:30</option>
                            <option value="18:00">18:00</option>
                            <option value="18:30">18:30</option>
                            <option value="19:00">19:00</option>
                            <option value="19:30">19:30</option>
                            <option value="20:00">20:00</option>
                            <option value="20:30">20:30</option>
                            <option value="21:00">21:00</option>
                            <option value="21:30">21:30</option>
                            <option value="22:00">22:00</option>
                            <option value="22:30">22:30</option>
                        </select>
                    </div>
                    <div class="input-group" style="margin-bottom: 0;">
                        <label for="schedule-activity">활동</label>
                        <select id="schedule-activity">
                            <option value="식사">식사</option>
                            <option value="학원">학원</option>
                            <option value="개인사정">개인사정</option>
                            <option value="운동">운동</option>
                            <option value="기타">기타</option>
                        </select>
                    </div>
                    <button class="add-btn" onclick="addPersonalSchedule()">추가</button>
                </div>
                
                <div class="schedule-list" id="personalScheduleList">
                    <!-- 추가된 스케줄이 여기에 표시됩니다 -->
                </div>
            </div>
        </div>
    </div>

    <script>
        // 전역 변수
        let currentGrade = 'middle';
        let personalSchedules = [];
        let timerInterval;
        let timeLeft = 25 * 60; // 25분 (초 단위)
        let isRunning = false;
        let completedCount = 0;
        let totalStudyMinutes = 0;

        // 페이지 로드 시 초기화
        document.addEventListener('DOMContentLoaded', () => {
            // 오늘 날짜 설정
            const today = new Date();
            document.getElementById('plan-date').value = today.toISOString().split('T')[0];
            
            // 요일 자동 설정
            const days = ['일', '월', '화', '수', '목', '금', '토'];
            document.getElementById('plan-day').value = days[today.getDay()];
            
            // 초기 건강 상태 업데이트
            updateHealthStatus();
            
            // 네비게이션 바 활성화
            document.getElementById('navbar').classList.add('active');
            
            // 타이머 초기화
            updateTimerDisplay();
            
            // 개인 스케줄 목록 초기화
            updatePersonalScheduleList();
            
            // 브라우저 알림 권한 요청
            if ('Notification' in window && Notification.permission === 'default') {
                Notification.requestPermission();
            }
        });

        // 네비게이션 바 스크롤 처리
        let lastScrollY = window.scrollY;
        const navbar = document.getElementById('navbar');

        window.addEventListener('scroll', () => {
            if (window.scrollY < lastScrollY || window.scrollY < 50) {
                navbar.classList.add('active');
            } else {
                navbar.classList.remove('active');
            }
            lastScrollY = window.scrollY;
        });

        // 페이지 전환 함수
        function showPage(pageId) {
            // 모든 페이지 숨기기
            const pages = document.querySelectorAll('.page');
            pages.forEach(page => {
                page.classList.remove('active');
            });

            // 선택된 페이지 보이기
            document.getElementById(pageId).classList.add('active');

            // 네비게이션 아이템의 active 클래스 업데이트
            const navItems = document.querySelectorAll('.nav-item');
            navItems.forEach(item => {
                item.classList.remove('active');
            });
            event.target.classList.add('active');
        }

        // 학교급 선택 함수
        function selectGrade(grade) {
            currentGrade = grade;
            
            // 버튼 상태 업데이트
            document.getElementById('middle-btn').classList.remove('active');
            document.getElementById('high-btn').classList.remove('active');
            
            if (grade === 'middle') {
                document.getElementById('middle-btn').classList.add('active');
            } else {
                document.getElementById('high-btn').classList.add('active');
            }
            
            updateHealthStatus();
        }

        // 건강 상태 업데이트 함수
        function updateHealthStatus() {
            const sleepTime = parseFloat(document.getElementById('sleep-time').value);
            const privateEducationTime = parseInt(document.getElementById('private-education-time').value);
            const schoolStudyTime = parseInt(document.getElementById('school-study-time').value);
            
            // 수면 상태 분석
            updateSleepStatus(sleepTime);
            
            // 학습 부담 분석
            updateStudyLoadStatus(privateEducationTime, schoolStudyTime);
            
            // 생활 균형 분석
            updateBalanceStatus(sleepTime, privateEducationTime, schoolStudyTime);
            
            // AI 종합 분석
            updateAIAnalysis(sleepTime, privateEducationTime, schoolStudyTime);
        }

        function updateSleepStatus(sleepTime) {
            const sleepIndicator = document.getElementById('sleep-indicator');
            const sleepAdvice = document.getElementById('sleep-advice');
            
            // 중고등학생 수면 기준: 6시간 미만 위험
            if (sleepTime < 6) {
                sleepIndicator.className = 'status-indicator status-danger';
                sleepIndicator.textContent = '위험';
                sleepAdvice.textContent = '수면 부족으로 학습 능력 저하, 면역력 약화, 성장 지연이 우려됩니다. 최소 7-8시간 수면을 권장합니다.';
            } else if (sleepTime < 7) {
                sleepIndicator.className = 'status-indicator status-warning';
                sleepIndicator.textContent = '주의';
                sleepAdvice.textContent = '수면 시간이 다소 부족합니다. 집중력 저하와 스트레스 증가 가능성이 있습니다.';
            } else {
                sleepIndicator.className = 'status-indicator status-safe';
                sleepIndicator.textContent = '양호';
                sleepAdvice.textContent = '충분한 수면을 취하고 있습니다. 건강한 학습을 위한 좋은 기반입니다.';
            }
        }

        function updateStudyLoadStatus(privateEducationTime, schoolStudyTime) {
            const studyIndicator = document.getElementById('study-indicator');
            const studyAdvice = document.getElementById('study-advice');
            
            const totalStudyTime = privateEducationTime + schoolStudyTime;
            
            // 사교육 25시간 이상 또는 총 학습시간 35시간 이상 위험
            if (privateEducationTime >= 25 || totalStudyTime >= 35) {
                studyIndicator.className = 'status-indicator status-danger';
                studyIndicator.textContent = '과부하';
                studyAdvice.textContent = '학습 시간이 과도합니다. 번아웃, 학습 효율성 저하, 건강 악화 위험이 높습니다. 적절한 휴식과 시간 조절이 필요합니다.';
            } else if (privateEducationTime >= 20 || totalStudyTime >= 28) {
                studyIndicator.className = 'status-indicator status-warning';
                studyIndicator.textContent = '높음';
                studyAdvice.textContent = '학습 부담이 높은 상태입니다. 스트레스 관리와 효율적인 학습법이 필요합니다.';
            } else {
                studyIndicator.className = 'status-indicator status-safe';
                studyIndicator.textContent = '적정';
                studyAdvice.textContent = '건강한 수준의 학습 시간을 유지하고 있습니다.';
            }
        }

        function updateBalanceStatus(sleepTime, privateEducationTime, schoolStudyTime) {
            const balanceIndicator = document.getElementById('balance-indicator');
            const balanceAdvice = document.getElementById('balance-advice');
            
            const totalStudyTime = privateEducationTime + schoolStudyTime;
            const freeTime = 24 * 7 - sleepTime * 7 - totalStudyTime - 35; // 35시간: 식사, 기타 필수 활동
            
            if (freeTime < 10 || sleepTime < 6) {
                balanceIndicator.className = 'status-indicator status-danger';
                balanceIndicator.textContent = '불균형';
                balanceAdvice.textContent = '학습과 생활의 균형이 깨져있습니다. 여가시간 확보와 수면시간 증가가 필요합니다.';
            } else if (freeTime < 20 || sleepTime < 7) {
                balanceIndicator.className = 'status-indicator status-warning';
                balanceIndicator.textContent = '주의';
                balanceAdvice.textContent = '생활 균형에 주의가 필요합니다. 적절한 휴식시간을 확보하세요.';
            } else {
                balanceIndicator.className = 'status-indicator status-safe';
                balanceIndicator.textContent = '균형';
                balanceAdvice.textContent = '학습과 휴식의 균형이 잘 잡혀있습니다.';
            }
        }

        function updateAIAnalysis(sleepTime, privateEducationTime, schoolStudyTime) {
            const currentStatus = document.getElementById('current-status');
            const riskFactors = document.getElementById('risk-factors');
            const improvements = document.getElementById('improvement-suggestions');
            
            const totalStudyTime = privateEducationTime + schoolStudyTime;
            const gradeText = currentGrade === 'middle' ? '중학생' : '고등학생';
            
            // 현재 상태 요약
            currentStatus.textContent = `${gradeText}으로 주 ${totalStudyTime}시간 학습, 평균 ${sleepTime}시간 수면 중입니다. 사교육 ${privateEducationTime}시간, 교내학습 ${schoolStudyTime}시간으로 구성되어 있습니다.`;
            
            // 위험 요소 분석
            let risks = [];
            if (sleepTime < 6) risks.push('심각한 수면부족으로 인한 학습능력 저하 및 건강 악화');
            if (privateEducationTime >= 25) risks.push('과도한 사교육으로 인한 번아웃 위험');
            if (totalStudyTime >= 35) risks.push('총 학습시간 과부하로 인한 스트레스 증가');
            if (sleepTime < 7 && totalStudyTime >= 28) risks.push('수면부족과 과도한 학습의 복합적 위험');
            
            if (risks.length === 0) {
                riskFactors.textContent = '현재 큰 위험 요소는 발견되지 않았습니다. 현재 패턴을 유지하세요.';
            } else {
                riskFactors.textContent = risks.join(', ') + '가 예상됩니다.';
            }
            
            // 개선 제안
            let suggestions = [];
            if (sleepTime < 7) suggestions.push('수면시간을 7-8시간으로 늘리기');
            if (privateEducationTime >= 20) suggestions.push('사교육 시간 단계적 감축');
            if (totalStudyTime >= 30) suggestions.push('학습 효율성 향상을 통한 시간 단축');
            suggestions.push('뽀모도로 기법을 활용한 집중 학습');
            suggestions.push('규칙적인 운동과 스트레스 관리');
            
            improvements.textContent = suggestions.join(', ') + '을 권장합니다.';
        }

        // 시간을 분으로 변환하는 함수
        function timeToMinutes(timeStr) {
            const [hours, minutes] = timeStr.split(':').map(Number);
            return hours * 60 + minutes;
        }

        // 분을 시간으로 변환하는 함수
        function minutesToTime(minutes) {
            const hours = Math.floor(minutes / 60);
            const mins = minutes % 60;
            return `${String(hours).padStart(2, '0')}:${String(mins).padStart(2, '0')}`;
        }

        // 일일 계획표 생성 함수
        function generateDailySchedule() {
            const subjects = [
                { name: '국어', emoji: '📖', time: parseInt(document.getElementById('korean-time').value) || 0 },
                { name: '영어', emoji: '🌍', time: parseInt(document.getElementById('english-time').value) || 0 },
                { name: '수학', emoji: '🔢', time: parseInt(document.getElementById('math-time').value) || 0 },
                { name: '사회', emoji: '🏛️', time: parseInt(document.getElementById('social-time').value) || 0 },
                { name: '과학', emoji: '🔬', time: parseInt(document.getElementById('science-time').value) || 0 },
                { name: '한국사', emoji: '🏺', time: parseInt(document.getElementById('history-time').value) || 0 }
            ];

            const selectedDay = document.getElementById('plan-day').value;
            const selectedDate = document.getElementById('plan-date').value;

            // 0분인 과목 제외
            const activeSubjects = subjects.filter(subject => subject.time > 0);

            if (activeSubjects.length === 0) {
                alert('최소 하나 이상의 과목에 학습 시간을 입력해주세요!');
                return;
            }

            // 해당 요일의 개인 스케줄 가져오기
            const daySchedules = personalSchedules.filter(schedule => schedule.day === selectedDay);

            // 계획표 생성
            const timeline = [];
            let currentTimeMinutes = 9 * 60; // 오전 9시 시작 (분 단위)

            // 개인 스케줄을 시간순으로 정렬
            daySchedules.sort((a, b) => {
                return timeToMinutes(a.startTime) - timeToMinutes(b.startTime);
            });

            let scheduleIndex = 0;
            let subjectIndex = 0;
            let remainingTimeForSubject = activeSubjects.length > 0 ? activeSubjects[0].time : 0;
            let totalStudyBlocks = 0;

            while (subjectIndex < activeSubjects.length) {
                // 개인 스케줄 확인
                if (scheduleIndex < daySchedules.length) {
                    const nextSchedule = daySchedules[scheduleIndex];
                    const scheduleStartMinutes = timeToMinutes(nextSchedule.startTime);
                    const scheduleEndMinutes = timeToMinutes(nextSchedule.endTime);

                    if (currentTimeMinutes >= scheduleStartMinutes) {
                        // 개인 스케줄 시간
                        timeline.push({
                            time: nextSchedule.startTime + ' - ' + nextSchedule.endTime,
                            activity: nextSchedule.activity,
                            type: 'personal'
                        });

                        currentTimeMinutes = scheduleEndMinutes;
                        scheduleIndex++;
                        continue;
                    }
                }

                if (remainingTimeForSubject > 0) {
                    const studyDuration = Math.min(25, remainingTimeForSubject); // 25분 또는 남은 시간
                    const endTimeMinutes = currentTimeMinutes + studyDuration;

                    timeline.push({
                        time: minutesToTime(currentTimeMinutes) + ' - ' + minutesToTime(endTimeMinutes),
                        activity: `${activeSubjects[subjectIndex].emoji} ${activeSubjects[subjectIndex].name} 학습`,
                        type: 'study'
                    });

                    remainingTimeForSubject -= studyDuration;
                    currentTimeMinutes = endTimeMinutes;
                    totalStudyBlocks++;

                    // 5분 휴식 (마지막 공부 세션이 아닌 경우)
                    if (remainingTimeForSubject > 0 || subjectIndex < activeSubjects.length - 1) {
                        const breakEndMinutes = currentTimeMinutes + 5;
                        timeline.push({
                            time: minutesToTime(currentTimeMinutes) + ' - ' + minutesToTime(breakEndMinutes),
                            activity: '☕ 휴식',
                            type: 'break'
                        });
                        currentTimeMinutes = breakEndMinutes;
                    }

                    // 현재 과목 완료 시 다음 과목으로
                    if (remainingTimeForSubject <= 0) {
                        subjectIndex++;
                        if (subjectIndex < activeSubjects.length) {
                            remainingTimeForSubject = activeSubjects[subjectIndex].time;
                            
                            // 과목 변경 시 긴 휴식 (15분)
                            const longBreakEndMinutes = currentTimeMinutes + 15;
                            timeline.push({
                                time: minutesToTime(currentTimeMinutes) + ' - ' + minutesToTime(longBreakEndMinutes),
                                activity: '🌟 긴 휴식',
                                type: 'long-break'
                            });
                            currentTimeMinutes = longBreakEndMinutes;
                        }
                    }
                }
            }

            // 결과 표시
            displaySchedule(timeline, selectedDate, selectedDay, totalStudyBlocks);
        }

        function displaySchedule(timeline, date, day, studyBlocks) {
            const scheduleDiv = document.getElementById('generatedSchedule');
            const headerDiv = document.getElementById('scheduleHeader');
            const timelineDiv = document.getElementById('scheduleTimeline');

            // 날짜 형식 변환
            const dateObj = new Date(date);
            const formattedDate = `${dateObj.getFullYear()}년 ${dateObj.getMonth() + 1}월 ${dateObj.getDate()}일`;

            headerDiv.textContent = `📅 ${formattedDate} ${day}요일 학습 계획표`;

            // 타임라인 생성
            timelineDiv.innerHTML = '';
            timeline.forEach(item => {
                const blockDiv = document.createElement('div');
                blockDiv.className = `schedule-block ${item.type}`;
                blockDiv.innerHTML = `
                    <span class="schedule-time">${item.time}</span>
                    <span>${item.activity}</span>
                `;
                timelineDiv.appendChild(blockDiv);
            });

            scheduleDiv.style.display = 'block';

            // 목표 뽀모도로 수 업데이트
            document.getElementById('targetPomodoros').textContent = studyBlocks;
        }

        // 개인 스케줄 추가 함수
        function addPersonalSchedule() {
            const day = document.getElementById('schedule-day').value;
            const startTime = document.getElementById('schedule-start-time').value;
            const endTime = document.getElementById('schedule-end-time').value;
            const activity = document.getElementById('schedule-activity').value;

            if (timeToMinutes(startTime) >= timeToMinutes(endTime)) {
                alert('종료 시간이 시작 시간보다 늦어야 합니다!');
                return;
            }

            const schedule = {
                day: day,
                startTime: startTime,
                endTime: endTime,
                activity: activity
            };

            personalSchedules.push(schedule);
            updatePersonalScheduleList();

            // 입력 필드 초기화
            document.getElementById('schedule-start-time').value = '09:00';
            document.getElementById('schedule-end-time').value = '10:00';
        }

        function updatePersonalScheduleList() {
            const listDiv = document.getElementById('personalScheduleList');
            listDiv.innerHTML = '';

            if (personalSchedules.length === 0) {
                listDiv.innerHTML = '<p style="text-align: center; color: #666; margin: 20px 0;">등록된 개인 스케줄이 없습니다.</p>';
                return;
            }

            personalSchedules.forEach((schedule, index) => {
                const itemDiv = document.createElement('div');
                itemDiv.className = 'schedule-item';
                itemDiv.innerHTML = `
                    <span><strong>${schedule.day}요일</strong> ${schedule.startTime} - ${schedule.endTime} | ${schedule.activity}</span>
                    <button class="remove-btn" onclick="removePersonalSchedule(${index})">삭제</button>
                `;
                listDiv.appendChild(itemDiv);
            });
        }

        function removePersonalSchedule(index) {
            personalSchedules.splice(index, 1);
            updatePersonalScheduleList();
        }

        // 타이머 관련 함수들
        function updateTimerDisplay() {
            const minutes = Math.floor(timeLeft / 60);
            const seconds = timeLeft % 60;
            document.getElementById('timerDisplay').textContent = 
                `${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
        }

        function startTimer() {
            if (isRunning) return;
            
            isRunning = true;
            document.getElementById('startBtn').disabled = true;
            document.getElementById('pauseBtn').disabled = false;
            document.getElementById('timerStatus').textContent = '🍅 집중 학습 중...';

            timerInterval = setInterval(() => {
                timeLeft--;
                updateTimerDisplay();

                if (timeLeft <= 0) {
                    completePomodoro();
                }
            }, 1000);
        }

        function pauseTimer() {
            if (!isRunning) return;
            
            clearInterval(timerInterval);
            isRunning = false;
            document.getElementById('startBtn').disabled = false;
            document.getElementById('pauseBtn').disabled = true;
            document.getElementById('timerStatus').textContent = '⏸️ 일시정지됨';
        }

        function resetTimer() {
            clearInterval(timerInterval);
            isRunning = false;
            timeLeft = 25 * 60;
            updateTimerDisplay();
            document.getElementById('startBtn').disabled = false;
            document.getElementById('pauseBtn').disabled = true;
            document.getElementById('timerStatus').textContent = '학습 준비 완료';
        }

        function completePomodoro() {
            clearInterval(timerInterval);
            isRunning = false;
            completedCount++;
            totalStudyMinutes += 25;
            
            document.getElementById('completedPomodoros').textContent = completedCount;
            document.getElementById('studyTime').textContent = totalStudyMinutes + '분';
            document.getElementById('startBtn').disabled = false;
            document.getElementById('pauseBtn').disabled = true;
            document.getElementById('timerStatus').textContent = '🎉 뽀모도로 완료! 5분 휴식하세요.';
            
            // 알림
            if ('Notification' in window && Notification.permission === 'granted') {
                new Notification('🍅 뽀모도로 완료!', {
                    body: '25분 집중 학습을 완료했습니다. 5분 휴식을 취하세요.',
                    icon: '/favicon.ico'
                });
            }
            
            // 타이머 리셋
            timeLeft = 25 * 60;
            updateTimerDisplay();
        }
    </script>
</body>
</html>